<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <body>
        <ui:composition template="./../index.xhtml">
            <ui:define name="content">
                <style>
                    .companyHeaderGrid.ui-panelgrid>*>tr,
                    .companyHeaderGrid.ui-panelgrid .ui-panelgrid-cell {
                        border: none;
                    }
                    #opMenu td{
                        border: none !important;
                    }
                    #opMenu tr{
                        border: none !important;
                    }
                </style>
                <p:outputPanel id="padding">
                    <p:growl id="msgs" />
                    <p:outputPanel rendered="#{asesoriaBean.showCreate}" >
                        <h:form id="fEmpleados" >                            
                            <p:panel id="basic"  header="Agregar asesoría"  style="width: 80%; margin: auto; margin-bottom: 20px">
                                <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">   
                                    <p:row>
                                        <p:column >
                                        </p:column>
                                        <p:column >
                                        </p:column>
                                        <p:column >
                                            <h:outputText  value="Fecha:*"/> 
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column style=" width: 22%">
                                        </p:column>
                                        <p:column style=" width: 50%">
                                        </p:column>
                                        <p:column style=" width: 28%">
                                            <p:calendar navigator="true" yearRange="1910:" maxdate="#{capacitacionBean.hoy}" locale="es" pattern="dd/MM/yyyy" mask="true" showOn="button"  id="cfecha"  value="#{asesoriaBean.asesoria.fecha}" style="width: 100%;"/><br></br>
                                            <h:outputText  value="#{asesoriaBean.msgFecha}" style=" color:  red"/> 
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                                <p:outputPanel >
                                    <b>  <h:outputText  value="Proyecto"/> </b>
                                    <hr></hr>
                                    <p:panelGrid  styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">   
                                        <p:row>
                                            <p:column style=" width: 30%">
                                                <h:outputText  value="Código:*"/> 
                                            </p:column>
                                            <p:column>
                                                <h:outputText  value="Nombre:*"/>
                                            </p:column>
                                            <p:column style=" width: 5%">
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:inputText value="#{asesoriaBean.proyectoSeleccionado.codigoProyecto}" style=" width: 100%" readonly="true" />  
                                            </p:column>
                                            <p:column>
                                                <p:inputText value="#{asesoriaBean.proyectoSeleccionado.nombre}" style=" width: 100%" readonly="true" /> 
                                            </p:column> 
                                            <p:column>
                                                <p:commandButton  update=":padding" actionListener="#{asesoriaBean.mostrarProyectos}" oncomplete="PF('dgBuscarProyectoCooperativa').show()" icon="fa fa-search" title="Buscar" >
                                                </p:commandButton>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column style=" width: 30%">
                                                <h:outputText  value="#{asesoriaBean.msgProyecto}" style=" color:  red"/> 
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>
                                </p:outputPanel>
                                <br></br>
                                <b><h:outputText  value="Asesoría"/></b>
                                <hr></hr>
                                <p:outputPanel id="activos">  
                                    <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="Descripción:*"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="2" style=" width: 100%">
                                                <p:inputTextarea style=" width: 100%" placeholder="Introduzca una descripción" value="#{asesoriaBean.asesoria.descripcion}" /> 
                                                <h:outputText  value="#{asesoriaBean.msgDescripcion}" style=" color:  red"/> 
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="Precio ($):*" />
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="Numero de beneficiarios:*"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="1"> <p:inputNumber placeholder="10.00" minValue="0" value="#{asesoriaBean.asesoria.precio}" style=" width: 100%" />
                                                <br></br>
                                                <h:outputText  value="#{asesoriaBean.msgPrecio}" style=" color:  red"/> 
                                            </p:column>
                                            <p:column colspan="1"> <p:inputNumber placeholder="5" decimalPlaces="0" minValue="0" value="#{asesoriaBean.asesoria.beneficiarios}" style=" width: 100%" /> 
                                                <br></br>
                                                <h:outputText  value="#{asesoriaBean.msgBeneficiarios}" style=" color:  red"/> 
                                            </p:column> 
                                        </p:row> 
                                    </p:panelGrid>                                               
                                </p:outputPanel>
                                <br></br>
                                <b>  <h:outputText  value="Buscar encargado"/></b>
                                <hr></hr>
                                <p:outputPanel >  
                                    <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="Área:*"/>
                                            </p:column>
                                            <p:column>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="1" style=" width: 30%">
                                                <p:selectOneMenu id="areasFiltradas" value="#{asesoriaBean.idArea}" style=" width: 100%;">
                                                    <f:selectItem itemLabel="[SELECCIONE]" itemValue="0" />
                                                    <f:selectItems value="#{asesoriaBean.listaArea}" var="l" itemLabel="#{l.nombreArea }" itemValue="#{l.idArea}"  />
                                                </p:selectOneMenu>
                                            </p:column>
                                           
                                        </p:row>
                                        
                                    </p:panelGrid>  
                                 
                                   
                                    <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="DUI:*"/>
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="Nombre:*"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="1" style=" width: 32%">
                                                <p:inputText style=" width: 100%"  value="#{asesoriaBean.empleadoSelecionada.duiEmpleado}" readonly="true" /> 
                                            </p:column>
                                            <p:column colspan="1" style=" width: 80%">
                                                <p:inputText style=" width: 100%"  value="#{asesoriaBean.empleadoSelecionada.nombreEmpleado} #{asesoriaBean.empleadoSelecionada.apellidoEmpleado}" readonly="true" /> 
                                            </p:column>
                                             <p:column colspan="1" style=" width: 100%">
                                                <p:commandButton  update=":padding" actionListener="#{asesoriaBean.mostrarEmpleados()}" oncomplete="PF('dgBuscarEncargado').show()" icon="fa fa-search" title="Buscar" >
                                                </p:commandButton>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column style=" width: 30%">
                                                <h:outputText  value="#{asesoriaBean.msgDui}" style=" color:  red"/> 
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>  
                                </p:outputPanel>
                                <br></br>
                                <center>
                                    <div class="buttons">
                                        <p:commandButton  value="Guardar" id="btnGuardar" icon="fa fa-check" style="#{asesoriaBean.btnCrear}" actionListener="#{asesoriaBean.validarFormulario}" update=":padding" > 
                                        </p:commandButton>
                                        <p:commandButton style="#{asesoriaBean.btnLimpiar}"  value="Limpiar" id="btnClean"   actionListener="#{asesoriaBean.limpiar}" update=":padding" class="clear" icon="fa fa-fw fa-minus"/>
                                        <p:commandButton  actionListener="#{asesoriaBean.enableShowDataBean}" update=":padding" icon="fa fa-close" title="Cancelar" value="Cancelar" style="#{asesoriaBean.btnCancelar}"> 
                                        </p:commandButton>
                                    </div>
                                </center>     
                            </p:panel>
                        </h:form>
                        <p:dialog header="Confirmar" width="25%" widgetVar="pgGuardar" modal="true"  visible="#{asesoriaBean.estadoFormulario}" resizable="true" responsive="true" styleClass="ui-panelgrid-blank" appendTo="@(body)">
                            <h:form>
                                <p:outputPanel style="text-align:center;">
                                    <br></br> 
                                    <p:panelGrid>
                                        <h:outputText value="¿Desea guardar esta asesoria?"/>
                                        <br></br>  
                                        <br></br>
                                    </p:panelGrid>                                 
                                    <hr></hr>
                                    <center>
                                        <p:commandButton style="#{asesoriaBean.btnNuevo}" value="Si" actionListener="#{asesoriaBean.crear}"   oncomplete="PF('pgGuardar').hide()"  title="Cerrar" update=":padding">
                                        </p:commandButton>
                                        <p:commandButton oncomplete="PF('pgGuardar').hide()" style="#{asesoriaBean.btnCancelar}"  value="No"> 
                                            <f:setPropertyActionListener value="#{false}" target="#{asesoriaBean.estadoFormulario}" />
                                        </p:commandButton>
                                    </center>
                                </p:outputPanel>
                            </h:form>
                        </p:dialog>  
                        <p:dialog header="Buscar encargado" widgetVar="dgBuscarEncargado"  width="60%" appendTo="@(body)" modal="true" >  
                            <h:form id="fBuscarEncargado"> 
                                <p:dataTable var="entidades" value="#{asesoriaBean.listaEmpleados}" widgetVar="empleadosData"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,15"
                                             paginatorPosition="bottom"
                                             currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                             emptyMessage="No se encontraron empleados" rowIndexVar="No"> 
                                    <f:facet name="header">
                                        <p:outputPanel>                                           
                                            <p:inputText id="globalFilter" onkeyup="PF('empleadosData').filter()" style="width:150px" placeholder="Buscar"/>
                                        </p:outputPanel>
                                    </f:facet>
                                    <p:column   
                                        headerText="Nº" width="5%" style="text-align: center" >                                             
                                        <h:outputText value="#{No+1}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.nombreEmpleado}" sortBy="#{entidades.nombreEmpleado}"  
                                              headerText="Nombres"
                                              filterMatchMode="contains" width="20%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.nombreEmpleado}"  />  
                                    </p:column>
                                    <p:column filterBy="#{entidades.apellidoEmpleado}" sortBy="#{entidades.apellidoEmpleado}"  
                                              headerText="Apellidos"
                                              filterMatchMode="contains" width="20%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.apellidoEmpleado}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.duiEmpleado}" sortBy="#{entidades.duiEmpleado}"  
                                              headerText="DUI"
                                              filterMatchMode="contains" width="10%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.duiEmpleado}"  />  
                                    </p:column>
                                    <p:column  width="6%" style="text-align: center">  
                                        <p:commandButton  update=":padding"  icon="fa fa-check" title="Seleccionar" style="#{solicitudCooperBean.btnCrear}">
                                            <f:setPropertyActionListener value="#{entidades}" target="#{asesoriaBean.empleadoSelecionada}"  />
                                        </p:commandButton>
                                    </p:column> 
                                </p:dataTable> 
                            </h:form> 
                        </p:dialog>
                        <p:dialog header="Buscar proyecto" widgetVar="dgBuscarProyectoCooperativa"  width="70%" appendTo="@(body)" modal="true" >  
                            <h:form id="fBuscarProyectoCooperativa"> 
                                <p:dataTable var="entidades" value="#{asesoriaBean.listaEntidadProyecto}" widgetVar="proyectoData"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,15"
                                             paginatorPosition="bottom"
                                             currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                             emptyMessage="No se encontraron créditos" rowIndexVar="No"> 
                                    <f:facet name="header">
                                        <p:outputPanel>                                           
                                            <p:inputText id="globalFilter" onkeyup="PF('proyectoData').filter()" style="width:150px" placeholder="Buscar"/>
                                        </p:outputPanel>
                                    </f:facet>
                                    <p:column   
                                        headerText="Nº" width="5%" style="text-align: center" >                                             
                                        <h:outputText value="#{No+1}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.TProyecto.codigoProyecto}" sortBy="#{entidades.TProyecto.codigoProyecto}"  
                                              headerText="Código"
                                              filterMatchMode="contains" width="10%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.TProyecto.codigoProyecto}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.TEntidad.codigoClienteEntidad}" sortBy="#{entidades.TEntidad.codigoClienteEntidad}" 
                                              headerText="Cliente"
                                              filterMatchMode="contains" width="10%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.TEntidad.codigoClienteEntidad}"  />  
                                    </p:column>  
                                    <p:column filterBy="#{entidades.TProyecto.nombre}" sortBy="#{entidades.TProyecto.nombre}" 
                                              headerText="Nombre"
                                              filterMatchMode="contains" width="39%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.TProyecto.nombre}"  />  
                                    </p:column> 
                                    <p:column  width="6%" style="text-align: center">  
                                        <p:commandButton  update=":padding"  icon="fa fa-check" title="Seleccionar">
                                            <f:setPropertyActionListener value="#{entidades.TProyecto}" target="#{asesoriaBean.proyectoSeleccionado}"  />
                                        </p:commandButton>
                                    </p:column> 
                                </p:dataTable> 
                            </h:form> 
                        </p:dialog>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{asesoriaBean.showUpdate}" style=" width: 100%">
                        <h:form id="fModificarAsesoria">
                            <p:panel id="pModificarAsesoria" header="Modificar asesoría"  style="width: 80%; margin: auto; margin-bottom: 20px">
                                <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">   
                                    <p:row>
                                        <p:column  >
                                        </p:column>
                                        <p:column >
                                        </p:column>
                                        <p:column >
                                            <h:outputText  value="Fecha:*"/> 
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column style=" width: 22%">
                                        </p:column>
                                        <p:column style=" width: 50%">
                                        </p:column>
                                        <p:column style=" width: 28%">
                                            <p:calendar navigator="true" yearRange="1910:" maxdate="#{capacitacionBean.hoy}"  locale="es" pattern="dd/MM/yyyy" mask="true" showOn="button"  id="cfecha"  value="#{asesoriaBean.asesoriaSeleccionada.fecha}" style="width: 100%;"/><br></br>
                                            <h:outputText  value="#{asesoriaBean.msgFecha}" style=" color:  red"/> 
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                                <b>   <h:outputText  value="Proyecto"/></b>
                                <hr></hr>
                                <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">   
                                    <p:row>
                                        <p:column style=" width: 30%">
                                            <h:outputText  value="Codigo:*"/> 
                                        </p:column>
                                        <p:column>
                                            <h:outputText  value="Nombre:*"/>
                                        </p:column>
                                        <p:column style=" width: 5%">
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:inputText value="#{asesoriaBean.proyectoSeleccionado.codigoProyecto}" style=" width: 100%" readonly="true" />  
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{asesoriaBean.proyectoSeleccionado.nombre}" style=" width: 100%" readonly="true" /> 
                                        </p:column> 
                                        <p:column>
                                            <p:commandButton  update=":padding" actionListener="#{asesoriaBean.mostrarProyectos}" oncomplete="PF('dgBuscarProyectoCooperativaModificar').show()" icon="fa fa-search" title="Buscar" >
                                            </p:commandButton>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column style=" width: 30%">
                                            <h:outputText  value="#{asesoriaBean.msgProyecto}" style=" color:  red"/> 
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                                <br></br>
                                <b>  <h:outputText  value="Asesoría"/></b>
                                <hr></hr>
                                <p:outputPanel>  
                                    <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="Descripción:*"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="2" style=" width: 100%">
                                                <p:inputTextarea style=" width: 100%" placeholder="Introduzca la descripción" value="#{asesoriaBean.asesoriaSeleccionada.descripcion}" /> 
                                                <h:outputText  value="#{asesoriaBean.msgDescripcion}" style=" color:  red"/> 
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="Precio ($):*" />
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="Numero de beneficiarios:*"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="1"> <p:inputNumber minValue="0" value="#{asesoriaBean.asesoriaSeleccionada.precio}" style=" width: 100%" />
                                                <br></br>
                                                <h:outputText  value="#{asesoriaBean.msgPrecio}" style=" color:  red"/> 
                                            </p:column>
                                            <p:column colspan="1"> <p:inputNumber minValue="0" decimalPlaces="0" value="#{asesoriaBean.asesoriaSeleccionada.beneficiarios}" style=" width: 100%" />
                                                <br></br>
                                                <h:outputText  value="#{asesoriaBean.msgBeneficiarios}" style=" color:  red"/> 
                                            </p:column>
                                        </p:row> 
                                    </p:panelGrid>                                               
                                </p:outputPanel>
                                <br></br>
                                <b>    <h:outputText  value="Buscar encargado"/> </b>
                                <hr></hr>
                                <p:outputPanel >  
                                    <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="Área:*"/>
                                            </p:column>
                                            <p:column>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="1" style=" width: 30%">
                                                <p:selectOneMenu id="areasFiltradas" value="#{asesoriaBean.idArea}" style=" width: 100%;">
                                                    <f:selectItem itemLabel="[SELECCIONE]" itemValue="0" />
                                                    <f:selectItems value="#{asesoriaBean.listaArea}" var="l" itemLabel="#{l.nombreArea }" itemValue="#{l.idArea}"  />
                                                </p:selectOneMenu>
                                            </p:column>
                                           
                                        </p:row>
                                    </p:panelGrid>                                               
                                </p:outputPanel>
                              
                                <p:outputPanel >  
                                    <p:panelGrid styleClass="companyHeaderGrid"  style="width: 100%; margin: auto;">
                                        <p:row>
                                            <p:column>
                                                <h:outputText value="DUI:*"/>
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="Nombre:*"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="1" style=" width: 32%">
                                                <p:inputText style=" width: 100%"  value="#{asesoriaBean.empleadoSelecionada.duiEmpleado}" readonly="true" /> 
                                            </p:column>
                                            <p:column colspan="1" style=" width: 80%">
                                                <p:inputText style=" width: 100%"  value="#{asesoriaBean.empleadoSelecionada.nombreEmpleado} #{asesoriaBean.empleadoSelecionada.apellidoEmpleado}" readonly="true" /> 
                                            </p:column>
                                             <p:column colspan="1" style=" width: 100%">
                                                <p:commandButton  update=":padding" actionListener="#{asesoriaBean.mostrarEmpleados()}" oncomplete="PF('dgBuscarEncargado').show()" icon="fa fa-search" title="Buscar" >
                                                </p:commandButton>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column style=" width: 30%">
                                                <h:outputText  value="#{asesoriaBean.msgDui}" style=" color:  red"/> 
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>                                               
                                </p:outputPanel>
                                <br></br>
                                <div align="center">
                                    <p:commandButton title="Registrar" value="Guardar"  actionListener="#{asesoriaBean.validarFormularioModificar}"  update=":padding"   icon="fa fa-check" style="#{asesoriaBean.btnCrear}">
                                    </p:commandButton>                                    
                                    <p:commandButton id="btnModificarCancelar" actionListener="#{asesoriaBean.enableShowDataBean}" update=":padding" icon="fa fa-close" title="Cancelar" value="Cancelar" style="#{asesoriaBean.btnCancelar}"> 
                                    </p:commandButton>
                                </div>
                            </p:panel>
                        </h:form>
                        <p:dialog header="Confirmar" width="25%" widgetVar="pgModificar" modal="true" visible="#{asesoriaBean.estadoFormulario}" resizable="true" responsive="true" styleClass="ui-panelgrid-blank" appendTo="@(body)">
                            <h:form>
                                <p:outputPanel style="text-align:center;">
                                    <br></br>
                                    <p:panelGrid>
                                        <h:outputText value="¿Desea modificar esta asesoria?"/>
                                    </p:panelGrid>
                                    <br></br>
                                    <hr></hr>
                                    <center>
                                        <p:commandButton value="Si" actionListener="#{asesoriaBean.modificar}"  update=":padding" oncomplete="PF('pgModificar').hide()" icon="fa fa-check" style="#{asesoriaBean.btnNuevo}">
                                        </p:commandButton>
                                        <p:commandButton oncomplete="PF('pgModificar').hide()" icon="fa fa-close"  value="No" style="#{asesoriaBean.btnCancelar}"> 
                                            <f:setPropertyActionListener value="#{false}" target="#{asesoriaBean.estadoFormulario}" />
                                        </p:commandButton>
                                    </center>
                                </p:outputPanel>
                            </h:form>
                        </p:dialog>
                        <p:dialog header="Buscar encargado" widgetVar="dgBuscarEncargadoModificar"  width="60%" appendTo="@(body)" modal="true" >  
                            <h:form id="fBuscarEncargadoModificar"> 
                                <p:dataTable var="entidades" value="#{asesoriaBean.listaEmpleados}" widgetVar="empleadosData"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,15"
                                             paginatorPosition="bottom"
                                             currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                             emptyMessage="No se encontraron empleados" rowIndexVar="No"> 
                                    <f:facet name="header">
                                        <p:outputPanel>                                           
                                            <p:inputText id="globalFilter" onkeyup="PF('empleadosData').filter()" style="width:150px" placeholder="Buscar"/>
                                        </p:outputPanel>
                                    </f:facet>
                                    <p:column   
                                        headerText="Nº" width="5%" style="text-align: center" >                                             
                                        <h:outputText value="#{No+1}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.duiEmpleado}" sortBy="#{entidades.duiEmpleado}"  
                                              headerText="DUI"
                                              filterMatchMode="contains" width="10%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.duiEmpleado}"  />  
                                    </p:column>
                                    <p:column filterBy="#{entidades.nombreEmpleado}" sortBy="#{entidades.nombreEmpleado}"  
                                              headerText="Nombres"
                                              filterMatchMode="contains" width="20%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.nombreEmpleado}"  />  
                                    </p:column>
                                    <p:column filterBy="#{entidades.apellidoEmpleado}" sortBy="#{entidades.apellidoEmpleado}"  
                                              headerText="Apellidos"
                                              filterMatchMode="contains" width="20%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.apellidoEmpleado}"  />  
                                    </p:column> 
                                    <p:column  width="6%" style="text-align: center">  
                                        <p:commandButton  update=":padding"  icon="fa fa-check" title="Seleccionar" style="#{solicitudCooperBean.btnCrear}">
                                            <f:setPropertyActionListener value="#{entidades}" target="#{asesoriaBean.empleadoSelecionada}"  />
                                        </p:commandButton>
                                    </p:column> 
                                </p:dataTable> 
                            </h:form> 
                        </p:dialog>
                        <p:dialog header="Buscar proyecto" widgetVar="dgBuscarProyectoCooperativaModificar"  width="60%" appendTo="@(body)" modal="true" >  
                            <h:form id="fBuscarProyectoCooperativaModificar"> 
                                <p:dataTable var="entidades" value="#{asesoriaBean.listaEntidadProyecto}" widgetVar="proyectoData"
                                             paginator="true"
                                             rows="10"
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,15"
                                             paginatorPosition="bottom"
                                             currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                             emptyMessage="No se encontraron créditos" rowIndexVar="No"> 
                                    <f:facet name="header">
                                        <p:outputPanel>                                           
                                            <p:inputText id="globalFilter" onkeyup="PF('proyectoData').filter()" style="width:150px" placeholder="Buscar"/>
                                        </p:outputPanel>
                                    </f:facet>
                                    <p:column   
                                        headerText="Nº" width="5%" style="text-align: center" >                                             
                                        <h:outputText value="#{No+1}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.TProyecto.codigoProyecto}" sortBy="#{entidades.TProyecto.codigoProyecto}"  
                                              headerText="Código"
                                              filterMatchMode="contains" width="10%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.TProyecto.codigoProyecto}"  />  
                                    </p:column> 
                                    <p:column filterBy="#{entidades.TEntidad.codigoClienteEntidad}" sortBy="#{entidades.TEntidad.codigoClienteEntidad}" 
                                              headerText="Cliente"
                                              filterMatchMode="contains" width="10%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.TEntidad.codigoClienteEntidad}"  />  
                                    </p:column>  
                                    <p:column filterBy="#{entidades.TProyecto.nombre}" sortBy="#{entidades.TProyecto.nombre}" 
                                              headerText="Nombre"
                                              filterMatchMode="contains" width="39%" filterStyle="width: 100%">  
                                        <h:outputText value="#{entidades.TProyecto.nombre}"  />  
                                    </p:column> 
                                    <p:column  width="6%" style="text-align: center">  
                                        <p:commandButton  update=":padding"  icon="fa fa-check" title="Seleccionar">

                                            <f:setPropertyActionListener value="#{entidades.TProyecto}" target="#{asesoriaBean.proyectoSeleccionado}"  />
                                        </p:commandButton>
                                    </p:column> 
                                </p:dataTable> 
                            </h:form> 
                        </p:dialog>
                    </p:outputPanel>
                    <p:outputPanel rendered="#{asesoriaBean.showData}">
                        <h:form> 
                            #{asesoriaBean.updateListaAsesorias()}
                            <p:panel id="pDatosCompradores" header="Administrar asesorías" style="width: 100%; margin: auto; margin-bottom: 20px" >
                                <div align="center"> 
                                    <p:fieldset>
                                        <div align="left">
                                            <p:commandButton title="Nueva asesoría" id="add"  actionListener="#{asesoriaBean.enableShowCreate}" update=":padding"    icon="fa fa-plus" style="#{asesoriaBean.btnNuevo}"  />
                                        </div>
                                    </p:fieldset>
                                    <p:dataTable  id="basicDT" var="asesorias" widgetVar="asesoriaData"  paginator="true" rows="10" value="#{asesoriaBean.listaAsesoria}"
                                                  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                  paginatorPosition="bottom" style="width: 100%;"
                                                  rowIndexVar="No" rowsPerPageTemplate="5,10,15"
                                                  currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                                  emptyMessage="No se encontraron asesorias"
                                                  >
                                        <f:facet name="header">
                                            <p:outputPanel>                                           
                                                <p:inputText id="globalFilter" onkeyup="PF('asesoriaData').filter()" style="width:150px" placeholder="Buscar"/>
                                            </p:outputPanel>
                                        </f:facet>
                                        <p:column headerText="Nº" width="5%">
                                            <div align="center"> <h:outputText value="#{No+1}"/> </div>
                                        </p:column>
                                        <p:column headerText="Crédito" width="15%" filterBy="#{asesorias.TProyecto.codigoProyecto}"  filterStyle="width:100%" sortBy="#{asesorias.TProyecto.codigoProyecto}" >
                                            <h:outputText value="#{asesorias.TProyecto.codigoProyecto}"/>
                                        </p:column>
                                        <p:column headerText="Encargado" width="51%" filterBy="#{asesorias.TEmpleado.nombreEmpleado} #{asesorias.TEmpleado.apellidoEmpleado}"  filterStyle="width:100%" sortBy="#{asesorias.TEmpleado.nombreEmpleado} #{asesorias.TEmpleado.apellidoEmpleado}" >
                                            <h:outputText value="#{asesorias.TEmpleado.nombreEmpleado} #{asesorias.TEmpleado.apellidoEmpleado}"/>
                                        </p:column>
                                        <p:column headerText="Precio" width="10%" filterBy="#{asesorias.precio}"  filterStyle="width:100%" sortBy="#{asesorias.precio}" >
                                            <div align="right">     <h:outputText value="$"/>
                                                <h:outputText value="#{asesorias.precio}">
                                                    <f:convertNumber     pattern=",#00.00" locale="en-US" /> 
                                                </h:outputText>
                                            </div>
                                        </p:column>
                                        <p:column headerText="Fecha" width="10%" filterBy="#{asesorias.fecha}" sortBy="#{asesorias.fecha}" >
                                            <div align="center">
                                                <h:outputText value="#{asesorias.fecha}">
                                                    <f:convertDateTime pattern="dd/MM/YYYY"/>
                                                </h:outputText>
                                            </div>
                                        </p:column>
                                        <p:column headerText="" width="9%"  style="text-align: center" >
                                            <p:splitButton  update=":padding"  oncomplete="PF('pgVer').show()" icon="fa fa-eye"  style="#{asesorias.estado eq true? cuentaBean.btnDarDeAlta :  cuentaBean.btnDarDeBaja}" >
                                                <f:setPropertyActionListener  value="#{asesorias.TEmpleado}" target="#{asesoriaBean.empleadoSelecionada}"  />
                                                <f:setPropertyActionListener  value="#{asesorias.TProyecto}" target="#{asesoriaBean.proyectoSeleccionado}"  />
                                                <f:setPropertyActionListener  value="#{asesorias}" target="#{asesoriaBean.asesoriaSeleccionada}"  />
                                                <p:menuitem  update=":padding" icon=" fa fa-pencil" value="Modificar">
                                                    <f:setPropertyActionListener  value="#{asesorias.TEmpleado}" target="#{asesoriaBean.empleadoSelecionada}"  />
                                                    <f:setPropertyActionListener  value="#{asesorias.TProyecto}" target="#{asesoriaBean.proyectoSeleccionado}"  />
                                                    
                                                    <f:setPropertyActionListener  value="#{asesorias}" target="#{asesoriaBean.asesoriaSeleccionada}"  />
                                                    
                                                    <f:actionListener binding="#{asesoriaBean.cargarAsesoria()}"/> 
                              
                                                    
                                                </p:menuitem>
                                                <p:menuitem rendered="#{asesorias.estado}" update=":padding"  oncomplete="PF('pgBaja').show()" icon="fa fa-arrow-down" value="Dar de baja"    >
                                                    <f:setPropertyActionListener value="#{asesorias}" target="#{asesoriaBean.asesoriaSeleccionada}" />
                                                </p:menuitem>                                              
                                                <p:menuitem rendered="#{!asesorias.estado}" update=":padding"  oncomplete="PF('pgAlta').show()" icon="fa fa-arrow-up" value="Dar de alta"    >
                                                    <f:setPropertyActionListener value="#{asesorias}" target="#{asesoriaBean.asesoriaSeleccionada}" />
                                                </p:menuitem>                                              
                                            </p:splitButton> 
                                        </p:column>
                                    </p:dataTable>
                                </div>
                            </p:panel>
                        </h:form>
                        <p:dialog header="Confirmar" width="25%" widgetVar="pgAlta" modal="true"   visible="false"  resizable="true" responsive="true" styleClass="ui-panelgrid-blank" appendTo="@(body)">
                            <h:form>
                                <p:outputPanel style="text-align:center;">
                                    <br></br>
                                    <p:panelGrid>
                                        <h:outputText value="¿Desea dar de alta esta asesoría?" />
                                    </p:panelGrid>
                                    <br></br>
                                    <hr></hr>
                                    <center>
                                        <p:commandButton value="Si" actionListener="#{asesoriaBean.darDeAlta}"  update=":padding" icon="fa fa-check" style="#{asesoriaBean.btnNuevo}">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelCerrar"  update=":padding"  icon="fa fa-close"  value="No" style="#{asesoriaBean.btnCancelar}"> 
                                        </p:commandButton>
                                    </center>
                                </p:outputPanel>
                            </h:form>
                        </p:dialog>
                        <p:dialog header="Confirmar" width="25%" widgetVar="pgBaja" modal="true"   visible="false"  resizable="true" responsive="true" styleClass="ui-panelgrid-blank" appendTo="@(body)">
                            <h:form>
                                <p:outputPanel style="text-align:center;">
                                    <br></br>
                                    <p:panelGrid>
                                        <h:outputText value="¿Desea dar de baja esta asesoría?" />
                                    </p:panelGrid>
                                    <br></br>
                                    <hr></hr>
                                    <center>
                                        <p:commandButton value="Si" actionListener="#{asesoriaBean.darDeBaja}"  update=":padding" icon="fa fa-check" style="#{asesoriaBean.btnNuevo}">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelCerrar2"  update=":padding"  icon="fa fa-close"  value="No" style="#{asesoriaBean.btnCancelar}"> 
                                        </p:commandButton>
                                    </center>
                                </p:outputPanel>
                            </h:form>
                        </p:dialog>    
                        <p:dialog width="60%" header="Datos de la asesoría" widgetVar="pgVer" modal="true"   visible="false"  resizable="false" responsive="false" styleClass="ui-panelgrid-blank" appendTo="@(body)">
                            <h:form target="_blank">
                                <p:outputPanel >
                                    <p:panelGrid   style="width: 100%;"> 
                                        <p:row style=" text-align:  left">
                                            <p:column style=" width: 20%">
                                                <h:outputText value="Fecha:"/>
                                            </p:column>
                                            <p:column  style=" width: 20%">
                                                <h:outputText value="#{asesoriaBean.asesoriaSeleccionada.fecha}">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column style=" width: 20%">
                                                <h:outputText value="Crédito:"/>
                                            </p:column>
                                            <p:column  style=" width: 20%">
                                                <h:outputText value="#{asesoriaBean.proyectoSeleccionado.codigoProyecto}"/> 
                                            </p:column>
                                        </p:row>
                                        <p:row style=" text-align:  left">
                                            <p:column style=" width: 25%">
                                                <h:outputText value="Nombre proyecto:"/>
                                            </p:column>
                                            <p:column colspan="3" style=" width: 25%">
                                                <h:outputText value="#{asesoriaBean.proyectoSeleccionado.nombre}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row style=" text-align:  left">
                                            <p:column style=" width: 20%">
                                                <h:outputText value="Precio:"/>
                                            </p:column>
                                            <p:column style=" width: 20%">
                                                <h:outputText value="$"/>
                                                <h:outputText value="#{asesoriaBean.asesoriaSeleccionada.precio}">
                                                    <f:convertNumber     pattern=",#00.00" locale="en-US" />
                                                </h:outputText>
                                            </p:column>
                                            <p:column style=" width: 25%">
                                                <h:outputText value="Numero de beneficiarios:"/>
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="#{asesoriaBean.asesoriaSeleccionada.beneficiarios}"/> 
                                            </p:column>
                                        </p:row>
                                        <p:row style=" text-align:  left">
                                            <p:column colspan="1"> 
                                                <h:outputText value="Descripcion:"/>
                                            </p:column>
                                            <p:column colspan="3"> 
                                                <h:outputText value="#{asesoriaBean.asesoriaSeleccionada.descripcion}"/>
                                            </p:column>
                                        </p:row>
                                        <p:row style=" text-align:  left">
                                            <p:column style=" width: 25%">
                                                <h:outputText value="DUI encargado:"/>
                                            </p:column>
                                            <p:column style=" width: 25%">
                                                <h:outputText value="#{asesoriaBean.empleadoSelecionada.duiEmpleado}"/> 
                                            </p:column>
                                            <p:column style=" width: 20%">
                                                <h:outputText value="Nombre encargado:"/>
                                            </p:column>
                                            <p:column>
                                                <h:outputText value="#{asesoriaBean.empleadoSelecionada.nombreEmpleado} #{asesoriaBean.empleadoSelecionada.apellidoEmpleado}"/> 
                                            </p:column>
                                        </p:row>
                                        <p:row style=" text-align:  left">
                                            <p:column style=" width: 25%">
                                                <h:outputText value="Estado:"/>
                                            </p:column>
                                            <p:column colspan="3" style=" width: 25%">
                                                <h:outputText value="#{asesoriaBean.asesoriaSeleccionada.estado eq true? 'Activo': 'Inactivo'}"/> 
                                            </p:column>
                                        </p:row>
                                    </p:panelGrid>
                                    <br></br>
                                    <center>
                                        <p:splitButton   update=":padding" value="Ver PDF"  ajax="false" icon="fa fa-eye"  >
                                            <f:actionListener binding="#{asesoriaBean.verReporteAsesoria()}"/> 
                                            <p:menuitem   ajax="false" update=":padding"  icon="fa fa-download" value="Descargar PDF">
                                                <f:actionListener binding="#{asesoriaBean.verReporteAsesoriaPDF()}"/> 
                                            </p:menuitem>
                                        </p:splitButton>
                                    </center>
                                </p:outputPanel>
                            </h:form>
                        </p:dialog>
                    </p:outputPanel>
                </p:outputPanel>
            </ui:define>
            <ui:define name="aux">
                <script>
                    $(document).ready(function () {
                        $("#fin").addClass("active");
                    });
                </script>
            </ui:define>
        </ui:composition>
    </body>
</html>
